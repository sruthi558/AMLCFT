<!DOCTYPE html>
<html lang="en">
  <head>
    

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no"
    />   <meta
  http-equiv="Cache-Control"
  content="no-store, no-cache, must-revalidate"
/>
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />
<meta
  http-equiv="Content-Security-Policy"
  content="default-src 'self' data:; script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://cdn.datatables.net https://ajax.googleapis.com https://cdnjs.cloudflare.com http://gyrocode.github.io https://maxcdn.bootstrapcdn.com; style-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://fonts.googleapis.com https://maxcdn.bootstrapcdn.com https://cdn.datatables.net http://gyrocode.github.io; font-src 'self' https://fonts.gstatic.com;"
/>
    <title>Login -- ZenEye</title>
    <link rel="icon" type="image/x-icon" href="assets/img/favicon.ico" />
    <!-- BEGIN GLOBAL MANDATORY STYLES -->
    <link
      href="https://fonts.googleapis.com/css?family=Nunito:400,600,700"
      rel="stylesheet"
    />
    <link
      href="../static/bootstrap/css/bootstrap.min.css"
      rel="stylesheet"
      type="text/css"
    />
    <link
      href="../static/assets/css/plugins.css"
      rel="stylesheet"
      type="text/css"
    />
    <link
      href="../static/assets/css/authentication/form-1.css"
      rel="stylesheet"
      type="text/css"
    />
    <!-- END GLOBAL MANDATORY STYLES -->
    <link
      rel="stylesheet"
      type="text/css"
      href="../static/assets/css/forms/theme-checkbox-radio.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="../static/assets/css/forms/switches.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="../static/assets/css/custom.css"
    />
    

    <style>
      .simple-captcha-text{
        padding: 0 !important;
        margin-top: 10px !important;
      }
    .form-form .form-form-wrap form .field-wrapper input {
    
    border-bottom: 1px solid #ced4da !important;
   
}

    </style>

    
    {% if msg %}
    <script>
      alert("{{ msg }}");
    </script>
    {% endif %}
  </head>
  <body class="form">
    <div class="form-container">
      <div class="form-form">
        <div class="form-form-wrap">
          <div class="form-container">
            <div class="form-content text-center">
              <h2 class="logo font-weight-bold">ZenEye</h2>
              <h5 class="font-weight-bold text-blue mt-2">Sign In</h5>
              <p class="">Log in to your account to continue.</p>

              <form
                class="text-left mt-4"
                method="POST"
                action="{{ url_for('post_login') }}"
              >
                <div class="form">
                  <div id="username-field" class="field-wrapper input">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      class="feather feather-user"
                    >
                      <path
                        d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"
                      ></path>
                      <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                    <input
                      id="email"
                      name="email"
                      type="text"
                      class="form-control"
                      placeholder="Email iD"
                      required
                    />
                  </div>

                  <div id="password-field" class="field-wrapper input mb-2">
                    <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="feather feather-lock"
                    >
                    <rect
                    x="3"
                    y="11"
                    width="18"
                    height="11"
                    rx="2"
                    ry="2"
                    ></rect>
                    <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                  </svg>
                  <input
                  id="password"
                  name="password"
                  type="password"
                  class="form-control"
                  placeholder="Password"
                  required
                  />
                </div>
                <div id="captcha-field" class="field-wrapper input mb-2">
                  {{ captcha_html(captcha)|safe }}
                 
                  <button id="refresh-captcha" class="btn-white" style="border: none;border-radius: 50%;padding: 0;" type="button" onclick="refreshCaptcha()">
                    <svg width="18" height="18" style="position: relative; top:0;" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="#006eff"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path fill="#006eff" fill-rule="evenodd" d="M2.945 11.76a1 1 0 101.86-.736c-.892-2.256.024-4.967 2.316-6.29 1.987-1.147 4.354-.879 5.934.45l-2.49.295a1 1 0 10.234 1.986l4.31-.509a1 1 0 00.863-.793l.802-3.927a1 1 0 00-1.96-.4l-.385 1.889c-2.226-1.939-5.573-2.302-8.308-.723C3 4.803 1.675 8.549 2.945 11.76zm14.11-3.52a1 1 0 00-1.86.736c.892 2.256-.024 4.967-2.316 6.29-1.987 1.147-4.355.879-5.934-.45l2.49-.295a1 1 0 00-.234-1.986l-4.31.509a1 1 0 00-.863.793l-.802 3.927a1 1 0 001.96.4l.385-1.889c2.226 1.939 5.573 2.302 8.308.723 3.12-1.801 4.446-5.547 3.176-8.758z"></path> </g></svg>
                  </button>
                </div>
                <div class="d-sm-flex justify-content-between">
                    <div class="field-wrapper toggle-pass">
                      <p class="d-inline-block">Show Password</p>
                      <label class="switch s-primary">
                        <input
                          type="checkbox"
                          id="toggle-password"
                          class="d-none"
                        />
                        <span class="slider round"></span>
                      </label>
                    </div>
                    <div class="field-wrapper">
                      <button type="submit" class="btn btn-gradient" value=""  >
                        Log In
                      </button>
                    </div>
                  </div>

                  <div class="field-wrapper pt-5">
                    <a
                      href="{{url_for('forgot_password')}}"
                      class="forgot-pass-link text-red"
                      >Forgot Password?</a
                    >
                   
                  </div>
                </div>
              </form>
              <p class="terms-conditions">
                Â© 2024 All Rights Reserved.
                <a href="#" class="text-blue">ZenEye</a>
              </p>
            </div>
          </div>
        </div>
      </div>
      <div class="form-image shadow">
        <div class="l-image"></div>
      </div>
    </div>

    {% if active %}
    <button type="button" id="modalButton" class="d-none" data-toggle="modal" data-target="#exampleModal" ></button>
    <script>
          document.addEventListener("DOMContentLoaded", function() {
              document.getElementById("modalButton").click();
          });
  </script>
  
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog align-items-center d-flex">
      <div class="modal-content" style="width: 100vw !important;">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Upload the file : </h5>
          <button type="button" class="btn-close" data-dismiss="modal"
            aria-label="Close">X</button>
        </div>
        <div class="modal-body">
          <form action="{{url_for('ItFileUploder')}}" method="post" enctype="multipart/form-data">
            <input type="file" name="alertsFile" id="" required>
           
        </div>
        <div class="modal-footer">
         
          <button type="submit" class="btn btn-blue">
            Upload
          </button>
        </form>
        </div>
      </div>
    </div>
  </div>

  {% endif %}

    <!-- BEGIN GLOBAL MANDATORY SCRIPTS -->
    <script src="../static/assets/js/libs/jquery-3.1.1.min.js"></script>
    <script src="../static/bootstrap/js/popper.min.js"></script>
    <script src="../static/bootstrap/js/bootstrap.min.js"></script>

    <!-- END GLOBAL MANDATORY SCRIPTS -->
    <script src="../static/assets/js/authentication/form-1.js"></script>

    <script>
        document.getElementsByClassName('simple-captcha-text')[0].setAttribute('placeholder',"Please enter the text in above Image")

      function refreshCaptcha() {
    // Perform an AJAX request to fetch a new captcha image
    fetch('/refresh_captcha') // Modify the URL as per your application's routing
        .then(response => response.json())
        .then(data => {
     
            document.getElementsByClassName('simple-captcha-img')[0].setAttribute('src',`data:image/png;base64,${data.captcha_html.img}`)
            document.getElementsByName('captcha-hash')[0].setAttribute('value',data.captcha_html.hash)

        })
        .catch(error => console.error('Error refreshing captcha:', error));
}

    </script>





 

    
  </body>
</html>
